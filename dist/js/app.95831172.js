(function(){"use strict";var t={6330:function(t,a,e){var i=e(5130),r=e(6768);const n={id:"app"};function s(t,a,e,i,s,l){const h=(0,r.g2)("BitcoinChart");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(h)])}var l=e(4232);const h={class:"bitcoin-chart"},c={key:0,class:"error-message"},o={key:1,class:"date-label"};function d(t,a,e,i,n,s){return(0,r.uX)(),(0,r.CE)("div",h,[a[0]||(a[0]=(0,r.Lk)("div",{id:"chart"},null,-1)),n.errorMessage?((0,r.uX)(),(0,r.CE)("div",c,(0,l.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),n.currentDate?((0,r.uX)(),(0,r.CE)("div",o,(0,l.v_)(n.currentDate),1)):(0,r.Q3)("",!0)])}e(4114);var p=e(1851),f={name:"BitcoinChart",data(){return{svg:null,line:null,xScale:null,yScale:null,data:[],priceData:[],animationTimer:null,currentPrice:null,width:800,height:400,margin:{top:20,right:120,bottom:30,left:50},errorMessage:null,currentDate:null,currentIndex:1}},mounted(){this.initChart(),this.fetchBitcoinData()},beforeUnmount(){this.animationTimer&&clearInterval(this.animationTimer)},methods:{initChart(){const t=p.Ltv("#chart").append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom+80).append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`);this.svg=t,this.xScale=p.w7C().range([0,this.width]),this.yScale=p.m4Y().range([this.height,0]),this.xAxis=t.append("g").attr("class","x-axis").attr("transform",`translate(0,${this.height})`),this.yAxis=t.append("g").attr("class","y-axis"),this.yAxis.call(p.V4s(this.yScale)),this.yAxis.selectAll(".tick line").style("display","none"),this.yAxis.selectAll("path.domain").style("display","none"),this.yAxis.selectAll(".tick text").style("display","block"),this.line=p.n8j().x((t=>this.xScale(new Date(t.date)))).y((t=>this.yScale(t.price))).curve(p.oDi),this.path=t.append("path").attr("class","line").attr("fill","none").attr("stroke","#ff9900").attr("stroke-width",2),this.xAxis.call(p.l78(this.xScale)),this.xAxis.select("path.domain").attr("d",`M0.5,0.5H${this.width+.5}`);const a=40,e=50,i=(e-a)/2;this.miniContainer=t.append("g").attr("class","mini-chart").attr("transform",`translate(0,${this.height+40})`),this.miniContainer.append("rect").attr("class","mini-background").attr("x",0).attr("y",0).attr("width",this.width).attr("height",a).attr("fill","#F5F5F5").attr("rx",4),this.miniXScale=p.w7C().range([0,this.width]),this.miniYScale=p.m4Y().range([a,0]),this.miniLine=p.n8j().x((t=>this.miniXScale(new Date(t.date)))).y((t=>this.miniYScale(t.price))).curve(p.oDi),this.miniPath=this.miniContainer.append("path").attr("class","mini-line").attr("fill","none").attr("stroke","#ff9900").attr("stroke-width",1).attr("opacity",.5),this.progressMask=this.miniContainer.append("rect").attr("class","progress-mask").attr("x",0).attr("y",0).attr("width",0).attr("height",a).attr("fill","#e6f3ff").attr("opacity",.7),this.leftHandle=this.miniContainer.append("rect").attr("class","progress-handle left-handle").attr("x",0).attr("y",-i).attr("width",4).attr("height",e).attr("fill","#1890ff").attr("rx",2),this.rightHandle=this.miniContainer.append("rect").attr("class","progress-handle right-handle").attr("x",0).attr("y",-i).attr("width",4).attr("height",e).attr("fill","#1890ff").attr("rx",2),this.startDateText=this.miniContainer.append("text").attr("class","date-label start-date").attr("x",0).attr("y",a+20).attr("text-anchor","start").attr("fill","#666").attr("font-size","12px"),this.endDateText=this.miniContainer.append("text").attr("class","date-label end-date").attr("x",this.width).attr("y",a+20).attr("text-anchor","end").attr("fill","#666").attr("font-size","12px"),this.currentDateText=this.miniContainer.append("text").attr("class","date-label current-date").attr("y",a+20).attr("text-anchor","middle").attr("fill","#666").attr("font-size","12px");const r=t.append("defs").append("linearGradient").attr("id","line-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("y1",this.yScale(p.jkA(this.data,(t=>t.price)))).attr("x2",0).attr("y2",this.yScale(p.T9B(this.data,(t=>t.price))));r.append("stop").attr("offset","0%").attr("stop-color","#00ffff"),r.append("stop").attr("offset","100%").attr("stop-color","#1890ff");const n=t.append("defs").append("filter").attr("id","glow").attr("width","300%").attr("height","300%").attr("x","-100%").attr("y","-100%");n.append("feGaussianBlur").attr("class","blur").attr("stdDeviation","4").attr("result","coloredBlur");const s=n.append("feMerge");s.append("feMergeNode").attr("in","coloredBlur"),s.append("feMergeNode").attr("in","SourceGraphic"),this.path=t.append("path").attr("class","line").attr("fill","none").attr("stroke","url(#line-gradient)").attr("stroke-width",3).attr("filter","url(#glow)"),this.area=p.Wcw().x((t=>this.xScale(new Date(t.date)))).y0(this.height).y1((t=>this.yScale(t.price))).curve(p.oDi);const l=t.append("defs").append("linearGradient").attr("id","area-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",this.height);l.append("stop").attr("offset","0%").attr("stop-color","#1890ff").attr("stop-opacity",.2),l.append("stop").attr("offset","100%").attr("stop-color","#1890ff").attr("stop-opacity",0),this.areaPath=t.append("path").attr("class","area").attr("fill","url(#area-gradient)");const h=t.append("defs").append("filter").attr("id","pulse").attr("width","300%").attr("height","300%").attr("x","-100%").attr("y","-100%");h.append("feGaussianBlur").attr("class","blur").attr("stdDeviation","2").attr("result","coloredBlur");const c=h.append("feMerge");c.append("feMergeNode").attr("in","coloredBlur"),c.append("feMergeNode").attr("in","SourceGraphic");const o=t.append("defs").append("radialGradient").attr("id","pulseGradient");o.append("stop").attr("offset","0%").attr("stop-color","#1890ff").attr("stop-opacity",.8),o.append("stop").attr("offset","100%").attr("stop-color","#1890ff").attr("stop-opacity",0)},updateChart(){if(0===this.priceData.length)return;let t;this.priceData.length>=120?(this.priceData=this.priceData.slice(-120),t=this.priceData.slice(-120)):t=this.data.slice(0,120);const a=p.jkA(this.priceData,(t=>t.price)),e=p.T9B(this.priceData,(t=>t.price));this.yScale.domain([.9*a,1.1*e]),this.yAxis.transition().duration(300).call(p.V4s(this.yScale)),this.yAxis.selectAll(".tick line").style("display","none"),this.yAxis.selectAll("path.domain").style("display","none"),this.yAxis.selectAll(".tick text").style("display","block");const i=p.jkA(t,(t=>new Date(t.date))),r=p.T9B(t,(t=>new Date(t.date)));this.xScale.domain([i,r]),this.xAxis.call(p.l78(this.xScale).ticks(10).tickFormat(p.DCK("%m/%d"))),this.yAxis.call(p.V4s(this.yScale)),this.path.datum(this.priceData).attr("d",this.line),this.areaPath.datum(this.priceData).attr("d",this.area);const n=this.priceData[this.priceData.length-1];this.svg.selectAll(".last-point").remove(),this.svg.selectAll(".pulse-circle").remove(),this.svg.selectAll(".price-text").remove();const s=this.svg.append("circle").attr("class","pulse-circle").attr("cx",this.xScale(new Date(n.date))).attr("cy",this.yScale(n.price)).attr("r",8).attr("fill","#1890ff").attr("opacity",.3).attr("filter","url(#pulse)");function l(){s.transition().duration(1500).attr("r",20).attr("opacity",0).on("end",(function(){p.Ltv(this).attr("r",8).attr("opacity",.3).call((()=>l()))}))}l(),this.svg.append("circle").attr("class","last-point").attr("cx",this.xScale(new Date(n.date))).attr("cy",this.yScale(n.price)).attr("r",4).attr("fill","#1890ff"),this.svg.append("text").attr("class","price-text").attr("x",this.xScale(new Date(n.date))+10).attr("y",this.yScale(n.price)).attr("dy",".35em").attr("fill","#333333").style("font-weight","bold").style("font-size","14px").text(`$${n.price.toFixed(2)}`),this.currentPrice=n?.price,this.currentDate=n?new Date(n.date).toLocaleDateString("zh-CN"):null,this.xAxis.select("path.domain").attr("d",`M0.5,0.5H${this.width+.5}`);const h=p.jkA(this.data,(t=>new Date(t.date))),c=p.T9B(this.data,(t=>new Date(t.date))),o=p.jkA(this.data,(t=>t.price)),d=p.T9B(this.data,(t=>t.price));this.miniXScale.domain([h,c]),this.miniYScale.domain([.9*o,1.1*d]),this.miniPath.datum(this.data).attr("d",this.miniLine);const f=this.width*(this.currentIndex/this.data.length);if(this.progressMask.attr("x",0).attr("width",f),this.leftHandle.attr("x",0),this.rightHandle.attr("x",f-2),this.data.length>0){const t=new Date(this.data[0].date),a=new Date(this.data[this.data.length-1].date),e=new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"});this.startDateText.text(e.format(t)),this.endDateText.text(e.format(a))}if(this.currentIndex>0&&this.currentIndex<=this.data.length){const t=new Date(this.data[this.currentIndex-1].date),a=new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}),e=f-2;this.currentDateText.attr("x",e).text(a.format(t)).style("display","block");const i=100,r=10;this.startDateText.style("display",e-i/2<i+r?"none":"block"),this.endDateText.style("display",e+i/2>this.width-i-r?"none":"block")}p.Ltv("#line-gradient").attr("y1",this.yScale(p.jkA(this.priceData,(t=>t.price)))).attr("y2",this.yScale(p.T9B(this.priceData,(t=>t.price))))},startAnimation(){this.currentIndex=1;const t=3e5,a=this.data.length,e=Math.floor(t/a);this.priceData=this.data.slice(0,this.currentIndex),this.updateChart(),this.animationTimer&&clearInterval(this.animationTimer),this.animationTimer=setInterval((()=>{this.currentIndex>=this.data.length?clearInterval(this.animationTimer):(this.priceData.push(this.data[this.currentIndex]),this.currentIndex++,this.updateChart())}),e)},async fetchBitcoinData(){try{const t=new Date,a=t.getTime(),e=new Date(t.setFullYear(t.getFullYear()-8));let i=e.getTime(),r=[];while(i<a){const t=await fetch(`https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1d&startTime=${i}&limit=365`);if(!t.ok)throw new Error("网络响应不正常");const a=await t.json();if(0===a.length)break;r=r.concat(a),i=a[a.length-1][0]+864e5,await new Promise((t=>setTimeout(t,300)))}this.data=r.map((t=>({date:new Date(t[0]),price:parseFloat(t[4])}))).sort(((t,a)=>t.date-a.date));const n=r[r.length-1],s=new Date(n[0]);this.data[this.data.length-1].date<s&&this.data.push({date:s,price:parseFloat(n[4])}),this.startAnimation(),this.errorMessage=null}catch(t){console.error("获取比特币数据失败:",t),this.errorMessage="比特币价格获取失败，请稍后重试"}}},computed:{progressPercentage(){return this.data.length&&this.priceData.length?this.currentIndex/this.data.length*100:0}}},u=e(1241);const g=(0,u.A)(f,[["render",d],["__scopeId","data-v-c199b0cc"]]);var m=g,x={name:"App",components:{BitcoinChart:m}};const y=(0,u.A)(x,[["render",s]]);var w=y;(0,i.Ef)(w).mount("#app")}},a={};function e(i){var r=a[i];if(void 0!==r)return r.exports;var n=a[i]={exports:{}};return t[i].call(n.exports,n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(a,i,r,n){if(!i){var s=1/0;for(o=0;o<t.length;o++){i=t[o][0],r=t[o][1],n=t[o][2];for(var l=!0,h=0;h<i.length;h++)(!1&n||s>=n)&&Object.keys(e.O).every((function(t){return e.O[t](i[h])}))?i.splice(h--,1):(l=!1,n<s&&(s=n));if(l){t.splice(o--,1);var c=r();void 0!==c&&(a=c)}}return a}n=n||0;for(var o=t.length;o>0&&t[o-1][2]>n;o--)t[o]=t[o-1];t[o]=[i,r,n]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){var t={524:0};e.O.j=function(a){return 0===t[a]};var a=function(a,i){var r,n,s=i[0],l=i[1],h=i[2],c=0;if(s.some((function(a){return 0!==t[a]}))){for(r in l)e.o(l,r)&&(e.m[r]=l[r]);if(h)var o=h(e)}for(a&&a(i);c<s.length;c++)n=s[c],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(o)},i=self["webpackChunkmy_vue_website"]=self["webpackChunkmy_vue_website"]||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))}();var i=e.O(void 0,[504],(function(){return e(6330)}));i=e.O(i)})();
//# sourceMappingURL=app.95831172.js.map