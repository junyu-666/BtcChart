(function(){"use strict";var t={8117:function(t,e,i){var a=i(5130),r=i(6768);const n={id:"app"};function s(t,e,i,a,s,h){const c=(0,r.g2)("BitcoinChart");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(c)])}var h=i(4232);const c={class:"bitcoin-chart"},l={key:0,class:"error-message"},o={key:1,class:"date-label"};function u(t,e,i,a,n,s){return(0,r.uX)(),(0,r.CE)("div",c,[e[0]||(e[0]=(0,r.Lk)("div",{id:"chart"},null,-1)),n.errorMessage?((0,r.uX)(),(0,r.CE)("div",l,(0,h.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),n.currentDate?((0,r.uX)(),(0,r.CE)("div",o,(0,h.v_)(n.currentDate),1)):(0,r.Q3)("",!0)])}i(4114);var d=i(7272),p={name:"BitcoinChart",data(){return{svg:null,line:null,xScale:null,yScale:null,data:[],priceData:[],animationTimer:null,currentPrice:null,width:800,height:400,margin:{top:20,right:120,bottom:30,left:50},errorMessage:null,currentDate:null,currentIndex:1}},mounted(){this.initChart(),this.fetchBitcoinData()},beforeUnmount(){this.animationTimer&&clearInterval(this.animationTimer)},methods:{initChart(){const t=d.Ltv("#chart").append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom+80).append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`);this.svg=t,this.xScale=d.w7C().range([0,this.width]),this.yScale=d.m4Y().range([this.height,0]),this.xAxis=t.append("g").attr("class","x-axis").attr("transform",`translate(0,${this.height})`),this.yAxis=t.append("g").attr("class","y-axis"),this.yAxis.call(d.V4s(this.yScale)),this.yAxis.selectAll(".tick line").style("display","none"),this.yAxis.selectAll("path.domain").style("display","none"),this.yAxis.selectAll(".tick text").style("display","block"),this.line=d.n8j().x((t=>this.xScale(new Date(t.date)))).y((t=>this.yScale(t.price))).curve(d.oDi),this.path=t.append("path").attr("class","line").attr("fill","none").attr("stroke","#ff9900").attr("stroke-width",2),this.xAxis.call(d.l78(this.xScale)),this.xAxis.select("path.domain").attr("d",`M0.5,0.5H${this.width+.5}`),t.append("rect").attr("class","progress-bg").attr("x",0).attr("y",this.height+60).attr("width",this.width).attr("height",12).attr("fill","#eee").attr("rx",6),this.progressBar=t.append("rect").attr("class","progress-bar").attr("x",0).attr("y",this.height+60).attr("width",0).attr("height",12).attr("fill","#ff9900").attr("rx",6)},updateChart(){if(0===this.priceData.length)return;let t;this.priceData.length>=90?(this.priceData=this.priceData.slice(-90),t=this.priceData.slice(-90)):t=this.data.slice(0,90);const e=d.jkA(this.priceData,(t=>t.price)),i=d.T9B(this.priceData,(t=>t.price));this.yScale.domain([.9*e,1.1*i]),this.yAxis.transition().duration(300).call(d.V4s(this.yScale)),this.yAxis.selectAll(".tick line").style("display","none"),this.yAxis.selectAll("path.domain").style("display","none"),this.yAxis.selectAll(".tick text").style("display","block");const a=d.jkA(t,(t=>new Date(t.date))),r=d.T9B(t,(t=>new Date(t.date)));this.xScale.domain([a,r]),this.xAxis.call(d.l78(this.xScale).ticks(10).tickFormat(d.DCK("%m/%d"))),this.yAxis.call(d.V4s(this.yScale)),this.path.datum(this.priceData).attr("d",this.line);const n=this.priceData[this.priceData.length-1];this.svg.selectAll(".last-point").remove(),this.svg.append("circle").attr("class","last-point").attr("cx",this.xScale(new Date(n.date))).attr("cy",this.yScale(n.price)).attr("r",4).attr("fill","#ff9900"),this.svg.append("text").attr("class","last-point").attr("x",this.xScale(new Date(n.date))+5).attr("y",this.yScale(n.price)).attr("dy",".35em").attr("fill","#ff9900").style("font-weight","bold").text(`$${n.price.toFixed(2)}`),this.currentPrice=n?.price,this.currentDate=n?new Date(n.date).toLocaleDateString("zh-CN"):null,this.xAxis.select("path.domain").attr("d",`M0.5,0.5H${this.width+.5}`),this.progressBar.transition().duration(100).attr("width",this.width*(this.currentIndex/this.data.length))},startAnimation(){this.currentIndex=1;const t=100;this.priceData=this.data.slice(0,this.currentIndex),this.updateChart(),this.animationTimer&&clearInterval(this.animationTimer),this.animationTimer=setInterval((()=>{this.currentIndex>=this.data.length?clearInterval(this.animationTimer):(this.priceData.push(this.data[this.currentIndex]),this.currentIndex++,this.updateChart())}),t)},fetchBitcoinData(){const t=new Date,e=new Date(t.setFullYear(t.getFullYear()-1)),i=Math.floor(e.getTime()/1e3);fetch(`https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=usd&from=${i}&to=${Math.floor(Date.now()/1e3)}`).then((t=>{if(!t.ok)throw new Error("网络响应不正常");return t.json()})).then((t=>{this.data=t.prices.map((t=>({date:new Date(t[0]),price:t[1]}))),this.startAnimation(),this.errorMessage=null})).catch((t=>{console.error("获取比特币数据失败:",t),this.errorMessage="比特币价格获取失败，请稍后重试"}))}},computed:{progressPercentage(){return this.data.length&&this.priceData.length?this.currentIndex/this.data.length*100:0}}},f=i(1241);const g=(0,f.A)(p,[["render",u],["__scopeId","data-v-0dba26bf"]]);var m=g,x={name:"App",components:{BitcoinChart:m}};const y=(0,f.A)(x,[["render",s]]);var v=y;(0,a.Ef)(v).mount("#app")}},e={};function i(a){var r=e[a];if(void 0!==r)return r.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,a,r,n){if(!a){var s=1/0;for(o=0;o<t.length;o++){a=t[o][0],r=t[o][1],n=t[o][2];for(var h=!0,c=0;c<a.length;c++)(!1&n||s>=n)&&Object.keys(i.O).every((function(t){return i.O[t](a[c])}))?a.splice(c--,1):(h=!1,n<s&&(s=n));if(h){t.splice(o--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var o=t.length;o>0&&t[o-1][2]>n;o--)t[o]=t[o-1];t[o]=[a,r,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,n,s=a[0],h=a[1],c=a[2],l=0;if(s.some((function(e){return 0!==t[e]}))){for(r in h)i.o(h,r)&&(i.m[r]=h[r]);if(c)var o=c(i)}for(e&&e(a);l<s.length;l++)n=s[l],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(o)},a=self["webpackChunkmy_vue_website"]=self["webpackChunkmy_vue_website"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[504],(function(){return i(8117)}));a=i.O(a)})();
//# sourceMappingURL=app.ff50c365.js.map